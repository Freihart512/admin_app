## Entidad: Pago

 Represents a specific monthly rental payment obligation generated by a Contract. This entity tracks the due date and amount owed, and it is the trigger for the automated generation of the corresponding Invoice.

### Propiedades del Sistema

- `payment_id` (Unique Identifier): A unique system-generated identifier for the payment.
- `contract_id` (Foreign Key): A foreign key linking to the contract that generated this payment.
- `due_date` (Date): The date the payment is due.
- `amount` (Decimal): The amount of the payment (should match the contract's rental amount).
- `payment_period`: Indicates the month/year or period the payment covers (e.g., "January 2024").
- `status`: The current status of the payment (e.g., 'due', 'paid', 'overdue', 'cancelled').
- `invoice_id` (Foreign Key, Optional): A foreign key linking to the invoice generated for this payment.
- `payment_date` (Timestamp, Optional): The date and time the payment was actually received and recorded in the system.
- `created_at` (Timestamp): The date and time when the payment record was generated by the system (typically upon contract creation or monthly).
- `updated_at` (Timestamp, Optional): The date and time when the payment record was last updated.
- `deleted_at` (Timestamp, Optional): The date and time when the payment record was soft-deleted from the system.

### Ciclo de Vida

A `Pago` record is typically created automatically when a `Contrato` is activated or on a monthly basis as per the contract terms. Its status starts as 'due'. Once the corresponding `Factura` is generated, the `invoice_id` is populated. The status changes to 'paid' when the payment is registered (though payment processing is out of scope for V1.0). The status can also become 'overdue' if the `due_date` passes without payment being recorded, or 'cancelled' if the associated contract is finalized prematurely or the payment is no longer required.

### 🔁 Casos de Uso Relacionados
 - [[📄 CasosDeUso/CU06_facturacion_automatica]]
- [[📄 CasosDeUso/CU08_resumen_historial]]

### 🧑‍💻 User Stories Relacionadas
- [[🧑‍💻 UserStories/US14_CU06_generar_facturas_automáticamente]]: Relacionado con la creación automática de pagos que desencadenan facturas.
- [[🧑‍💻 UserStories/US18_CU08_consultar_resúmenes_e_historial]]: Utiliza datos de pagos para calcular resúmenes de ingresos.
- [[🧑‍💻 UserStories/US19_CU08_consultar_resúmenes_e_historial]]

### Validaciones Clave

- The `amount` must be a positive value.
- The `due_date` must be a valid date.

### 👥 Roles Relacionados
 - [[👥 Usuarios/propietario]]
- [[👥 Usuarios/inquilino]]
- [[👥 Usuarios/admin]]
- [[👥 Usuarios/contador]]

### 🏠 Entidades Relacionadas
- [[🏠 Entidades/contrato]]
- [[🏠 Entidades/factura]]
- [[🏠 Entidades/propiedad]]
