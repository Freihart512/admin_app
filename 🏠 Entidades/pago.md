## Entidad: Pago

 Represents a specific monthly rental payment obligation generated by a Contract. This entity tracks the due date and amount owed, and it is the trigger for the automated generation of the corresponding Invoice.

### Propiedades del Sistema

- `payment_id` (Unique Identifier): A unique system-generated identifier for the payment.
- `contract_id` (Foreign Key): A foreign key linking to the contract that generated this payment.
- `due_date` (Date): The date the payment is due.
- `amount` (Decimal): The amount of the payment (should match the contract's rental amount).
- `payment_period`: Indicates the month/year or period the payment covers (e.g., "January 2024").
- `status`: The current status of the payment (e.g., 'due', 'paid', 'overdue', 'cancelled').
- `invoice_id` (Foreign Key, Optional): A foreign key linking to the invoice generated for this payment.
- `payment_date` (Timestamp, Optional): The date and time the payment was actually received and recorded in the system.
- `created_at` (Timestamp): The date and time when the payment record was generated by the system (typically upon contract creation or monthly).
- `updated_at` (Timestamp, Optional): The date and time when the payment record was last updated.
- `deleted_at` (Timestamp, Optional): The date and time when the payment record was soft-deleted from the system.

### Ciclo de Vida

A `Pago` record is typically created automatically when a `Contrato` is activated or on a monthly basis as per the contract terms. Its status starts as 'due'. Once the corresponding `Factura` is generated, the `invoice_id` is populated. The status changes to 'paid' when the payment is registered (though payment processing is out of scope for V1.0). The status can also become 'overdue' if the `due_date` passes without payment being recorded, or 'cancelled' if the associated contract is finalized prematurely or the payment is no longer required.

This includes cancellation as a result of the associated Contract being cancelled due to the logical deletion of the linked Propietario or Inquilino.
### ğŸ” Casos de Uso Relacionados
 - [[ğŸ“„ CasosDeUso/CU06_facturacion_automatica.md]]
- [[ğŸ“„ CasosDeUso/CU08_resumen_historial.md]]

### ğŸ§‘â€ğŸ’» User Stories Relacionadas
 - [[ğŸ§‘â€ğŸ’» UserStories/US14_generar_factura_automaticamente.md]]
- [[ğŸ§‘â€ğŸ’» UserStories/US19_listar_facturas_propietario.md]]
- [[ğŸ§‘â€ğŸ’» UserStories/US18_reporte_financiero.md]]

### ğŸ‘¥ Roles Relacionados
 - [[ğŸ‘¥ Usuarios/propietario.md]]
- [[ğŸ‘¥ Usuarios/inquilino.md]]
- [[ğŸ‘¥ Usuarios/admin.md]]
- [[ğŸ‘¥ Usuarios/contador.md]]

### ğŸ  Entidades Relacionadas
- [[ğŸ  Entidades/factura]]
- [[ğŸ  Entidades/contrato]]
- [[ğŸ  Entidades/propiedad]]
